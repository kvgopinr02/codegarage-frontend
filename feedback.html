<!DOCTYPE html>
<html>
<head>
  <title>CodeGarage | Feedback</title>
  <style>
    body{
      background:#020617;
      color:white;
      font-family:Arial;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .box{
      border:1px solid #1e293b;
      padding:25px;
      width:380px;
      border-radius:14px;
    }
    input,textarea,button{
      width:100%;
      margin:8px 0;
      padding:10px;
      background:#020617;
      color:white;
      border:1px solid #1e293b;
      border-radius:8px;
    }
    button{
      background:linear-gradient(90deg,#2563eb,#22c55e);
      cursor:pointer;
    }
    .admin-btn{
      background:#020617;
      border:1px solid #2563eb;
      margin-top:12px;
    }
  </style>
</head>

<body>
  <div class="box">
    <h2>User Feedback</h2>

    <input id="name" placeholder="Name / Roll Number">
    <textarea id="experience" placeholder="Your Experience"></textarea>
    <textarea id="problems" placeholder="Problems Faced"></textarea>
    <textarea id="suggestions" placeholder="Suggestions"></textarea>

    <!-- SUBMIT -->
    <button type="button" onclick="submitFeedback()">Submit Feedback</button>

    <!-- ADMIN BUTTON -->
    <button type="button" class="admin-btn" onclick="adminLogin()">Admin</button>
  </div>

<script>
async function submitFeedback(){
  const token = localStorage.getItem("token");

  if(!token){
    alert("Please login first");
    return;
  }

  const res = await fetch("http://localhost:5000/feedback", {
    method: "POST",
    headers: {
  "Content-Type": "application/json",
  "Authorization": "Bearer " + localStorage.getItem("token")
}
,
    body: JSON.stringify({
      name: name.value.trim(),
      experience: experience.value.trim(),
      problems: problems.value.trim(),
      suggestions: suggestions.value.trim()
    })
  });

  if(res.ok){
    alert("Feedback submitted successfully");
    document.querySelectorAll("input,textarea").forEach(e => e.value = "");
  }else{
    alert("Error submitting feedback");
  }
}


  if(res.ok){
    alert("Feedback submitted successfully");
    document.querySelectorAll("input,textarea").forEach(e=>e.value="");
  }else{
    alert("Server error");
  }

function adminLogin(){
  const pass = prompt("Enter Admin Password");

  if(pass === "323103310125"){
    window.location = "admin.html";
  }else{
    alert("Wrong password");
  }
}
</script>
</body>
</html>
