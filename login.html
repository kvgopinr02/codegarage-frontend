<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CodeGarage | Login</title>

<style>
/* ---------- GLOBAL ---------- */
body{
  margin:0;
  height:100vh;
  display:flex;
  font-family:Arial, sans-serif;
  background:#020617;
  color:white;
}

/* ---------- LEFT PANEL ---------- */
.left{
  flex:1;
  padding:60px;
  background:linear-gradient(135deg,#020617,#0f172a);
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.left h1{
  font-size:42px;
}

.left p{
  color:#94a3b8;
}

/* ---------- RIGHT PANEL ---------- */
.right{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* ---------- LOGIN BOX ---------- */
.box{
  position:relative;
  z-index:10; /* IMPORTANT */
  background:#020617;
  border:1px solid #1e293b;
  padding:35px;
  width:340px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
}

.box h2{
  margin-bottom:20px;
}

/* ---------- INPUTS ---------- */
input{
  width:100%;
  padding:12px;
  margin-top:15px;
  border-radius:10px;
  background:#020617;
  border:1px solid #334155;
  color:white;
  outline:none;
}

input:focus{
  border-color:#2563eb;
}

/* ---------- BUTTON ---------- */
button{
  width:100%;
  padding:12px;
  margin-top:20px;
  border-radius:10px;
  background:#2563eb;
  color:white;
  border:none;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  background:#1d4ed8;
}

/* ---------- SIGNUP TEXT ---------- */
.signup-text{
  text-align:center;
  margin-top:18px;
  font-size:14px;
  position:relative;
  z-index:20;
}

.signup-text a{
  color:#60a5fa;
  text-decoration:none;
  font-weight:600;
  cursor:pointer;
  pointer-events:auto;
}

.signup-text a:hover{
  text-decoration:underline;
}
</style>
</head>

<body>

<!-- LEFT -->
<div class="left">
  <h1>CodeGarage</h1>
  <p>Authenticate • Code • Repeat</p>
</div>

<!-- RIGHT -->
<div class="right">
  <div class="box">
    <h2>Login</h2>

    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">

    <button onclick="login()">Login</button>

    <p class="signup-text">
      New user?
      <a href="./register.html">Create account</a>
    </p>
  </div>
</div>

<script>
const API = "https://codegarage-backend-production.up.railway.app";

async function login(){
  if(!email.value || !password.value){
    alert("Please fill all fields");
    return;
  }

  try{
    const res = await fetch(`${API}/login`,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({
        email:email.value,
        password:password.value
      })
    });

    const data = await res.json();

    if(data.success){
      localStorage.setItem("token",data.token);
      window.location="home.html";
    }else{
      alert(data.message || "Invalid credentials");
    }
  }catch(err){
    alert("Server error. Try again later.");
  }
}
</script>

</body>
</html>
